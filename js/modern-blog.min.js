"use strict";var demo=function(n,a){function i(){var a=Trianglify({width:n.innerWidth,height:n.innerHeight,cell_size:90,variance:1,stroke_width:1,x_colors:"random",y_colors:"random"}).svg();t(a),r(),d()}function t(n){$(p.pattern).append(n),g.paths=[].slice.call(n.childNodes),g.points=[],g.paths.forEach(function(n){$(n).attr("class",h.polygon);var a=n.getBoundingClientRect(),i={x:a.left+a.width/2,y:a.top+a.height/2};g.points.push(i)}),$(p.pattern).removeClass(h.patternHidden)}function r(){var n=$(p.card);$.each(n,function(n,a){var i=new Card(a,n);u[a]={card:i};var t=$(n).find(p.cardImage),r=$(n).find(p.cardClose);$(t).on("click",e.bind(this,!0,a)),$(r).on("click",e.bind(this,!1,a))})}function d(){if(n.location.hash){var a='"'+n.location.hash+'"',i=$("[data-slug="+a+"]");i.length&&i.find(".card__image").trigger("click")}}function e(n,a,i){var t=u[a].card;if(!t.isOpen||!n){var r=new TimelineLite({paused:!0}),d=o(a);if(t.isOpen){var e=t.closeCard(),s=.8*e.duration();r.add(e),r.add(d,s)}else c(i.target),r.add(d),r.add(t.openCard(l),0);r.play()}}function o(a){var i=new TimelineLite,t=u[a].card;n.location.hash=$(t._el).data("slug");for(var r in u){var d=u[r].card;d.id===a||t.isOpen||i.add(d.hideCard(),0),d.id!==a&&t.isOpen&&i.add(d.showCard(),0)}return i}function c(n){var a=$(n).attr("xlink:href");$(p.pattern).css("background-image","url("+a+")")}function l(n){var a=n.width/2,i={x:n.x,y:n.y};g.points.forEach(function(n,t){s(n,a,i)?$(g.paths[t]).attr("class",h.polygon+" "+h.polygonHidden):$(g.paths[t]).attr("class",h.polygon)})}function s(n,a,i){var t=n.x,r=n.y,d=i.x,e=i.y,o=a*a,c=Math.pow(t-d,2)+Math.pow(r-e,2)<=o;return c}var p={pattern:".pattern",card:".card",cardImage:".card__image",cardClose:".card__btn-close"},h={patternHidden:"pattern--hidden",polygon:"polygon",polygonHidden:"polygon--hidden"},g={paths:null,points:null},u={};return{init:i}}(window);window.onload=demo.init;